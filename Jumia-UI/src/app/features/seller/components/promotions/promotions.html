<div class="promotions">
  <div class="page-header">
    <div class="header-content">
      <h2><i class="fas fa-percentage"></i> Discounted Products</h2>
      <p>Products with active discounts and promotions</p>
    </div>
  </div>

  <div class="promotions-stats">
    <div class="stat-item">
      <div class="stat-icon">
        <i class="fas fa-tags"></i>
      </div>
      <div class="stat-content">
        <span class="stat-number">{{ discountedProducts.length }}</span>
        <span class="stat-label">Total Discounted</span>
      </div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="stat-content">
        <span class="stat-number">{{ availableProductsCount }}</span>
        <span class="stat-label">Available</span>
      </div>
    </div>
    <div class="stat-item">
      <div class="stat-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <div class="stat-content">
        <span class="stat-number">{{ outOfStockProductsCount }}</span>
        <span class="stat-label">Out of Stock</span>
      </div>
    </div>
  </div>

  <div class="promotions-list">
    <div class="product-grid">
      <div class="product-card" *ngFor="let product of paginatedProducts">
        <div class="product-image" *ngIf="product.imageUrl">
          <img [src]="baseImageUrl + product.imageUrl" [alt]="product.name" />
        </div>
        <div class="product-header">
          <h3 class="product-title">
            <i class="fas fa-tag"></i> {{ product.name }}
          </h3>
          <div class="product-discount">
            <span class="discount-badge">
              <i class="fas fa-percentage"></i> {{ product.discountPercentage || "No Discount" }}
            </span>
          </div>
        </div>

        <div class="product-details">
          <div class="detail-row">
            <span class="detail-label">
               Price:
            </span>
            <span class="detail-value price">EGP{{ product.basePrice }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">
              <i class="fas fa-warehouse"></i> Stock:
            </span>
            <span class="detail-value">{{ product.stockQuantity }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">
              <i class="fas fa-info-circle"></i> Status:
            </span>
            <span
              class="detail-value status-badge"
              [class.status-active]="product.isAvailable"
              [class.status-inactive]="!product.isAvailable"
            >
              <i class="fas" [class.fa-check]="product.isAvailable" [class.fa-times]="!product.isAvailable"></i>
              {{ product.isAvailable ? "Available" : "Out of Stock" }}
            </span>
          </div>
        </div>

        <!-- <div class="product-actions">
          <button class="btn-action edit" title="Edit Product">
            <i class="fas fa-edit"></i> Edit
          </button>
          <button class="btn-action toggle"
                  [class.active]="product.isAvailable"
                  [title]="product.isAvailable ? 'Deactivate' : 'Activate'">
            <i class="fas" [class.fa-pause]="product.isAvailable" [class.fa-play]="!product.isAvailable"></i>
            {{product.isAvailable ? 'Deactivate' : 'Activate'}}
          </button>
        </div> -->
      </div>
    </div>

    <div *ngIf="discountedProducts.length === 0" class="no-promotions">
      <div class="empty-state">
        <div class="empty-icon">
          <i class="fas fa-percentage"></i>
        </div>
        <h3><i class="fas fa-info-circle"></i> No Discounted Products</h3>
        <p>Currently there are no products with active discounts or promotions.</p>
      </div>
    </div>

    <div class="pagination" *ngIf="discountedProducts.length > itemsPerPage">
      <button
        class="pagination-btn"
        (click)="prevPage()"
        [disabled]="currentPage === 1"
      >
        <i class="fas fa-chevron-left"></i> Previous
      </button>
      <div class="page-numbers">
        <button
          *ngFor="let page of getPageNumbers()"
          class="page-number"
          [class.active]="page === currentPage"
          (click)="goToPage(page)"
        >
          {{ page }}
        </button>
      </div>
      <button
        class="pagination-btn"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
      >
        Next <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
