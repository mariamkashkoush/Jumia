<div class="container">
  <div class="reviews-container" *ngIf="reviews.length > 0">
    
    <!-- Header Section -->
<div class="header-section">
  <div class="d-flex justify-content-between align-items-center">
    <div class="reviews-title">Verified Customer Reviews</div>

<button class="btn btn-secondary d-flex align-items-center gap-1 text-decoration-none"
        *ngIf="reviews.length > 3"
        (click)="[Print()]">
  <span>Show All</span>
  <i class="fas fa-chevron-down"></i>
</button>

  </div>

  <div class="verified-badge">
    <i class="fas fa-check-circle"></i>
    Verified Purchase
  </div>
</div>


    <!-- Rating Overview -->
    <div class="rating-overview">
      <div class="rating-left">
        <div class="comment-label">Product Comments ({{ reviews.length }})</div>
        <div class="stars">
          <ng-container *ngFor="let _ of getStars(averageRating)">
            <i class="fas fa-star"></i>
          </ng-container>
        </div>
        <div class="quality-section">
          <div class="quality-label">Quality</div>
          <div class="quality-value">Good</div>
        </div>
      </div>

      <div class="rating-right">
        <div class="main-rating">
          {{ averageRating | number: '1.1-1' }}<span style="font-size: 20px; color: #666;">/5</span>
        </div>
        <div class="stars">
          <ng-container *ngFor="let _ of getStars(averageRating)">
            <i class="fas fa-star"></i>
          </ng-container>
        </div>
        <div class="total-reviews">{{ reviews.length }} Verified Product Ratings</div>
      </div>
    </div>

    <!-- Add Review Button -->
    <div class="text-end my-3" *ngIf="canAddReview && !showReviewForm">
      <button class="btn btn-primary" (click)="showReviewForm = true">Add Review</button>
    </div>

    <!-- Inline Add Review Form -->
    <div *ngIf="showReviewForm" class="card p-4 shadow-sm mb-4" style="max-width: 600px; margin: 0 auto;">
      <h5 class="mb-3">Add Your Review</h5>
      
      <div class="mb-3">
        <label class="form-label">Rating (1-5):</label>
        <input type="number" [(ngModel)]="newReview.stars" min="1" max="5" class="form-control" />
      </div>
      
      <div class="mb-3">
        <label class="form-label">Comment:</label>
        <textarea [(ngModel)]="newReview.comment" class="form-control" rows="4"></textarea>
      </div>
      
      <div class="d-flex justify-content-end">
        <button class="btn btn-secondary me-2" (click)="showReviewForm = false">Cancel</button>
        <button class="btn btn-success" (click)="submitReview()">Submit</button>
      </div>
    </div>

    <!-- Customer Reviews -->
    <div class="customer-review" *ngFor="let review of visibleReviews">
      <div class="review-header d-flex justify-content-between">
        <div class="reviewer-name">By {{ review.customerName }}</div>
        <div class="review-date">{{ review.createdAt | date }}</div>
      </div>
      <div class="review-stars text-warning">
        <ng-container *ngFor="let _ of getStars(review.stars)">
          <i class="fas fa-star"></i>
        </ng-container>
      </div>
      <div class="review-comment mt-2">{{ review.comment }}</div>
    </div>
    <!-- Toggle Button to Show All / Collapse
<div class="text-center mt-3" *ngIf="reviews.length > 3">
  <button class="btn btn-link" (click)="showAllReviews = !showAllReviews">
    <span *ngIf="!showAllReviews">
      Show All Reviews <i class="fas fa-chevron-down"></i>
    </span>
    <span *ngIf="showAllReviews">
      Show Less <i class="fas fa-chevron-up"></i>
    </span>
  </button>
</div> -->


  </div>

  <!-- No Reviews Message -->
  <div *ngIf="reviews.length === 0" class="text-center p-4">
    <p>No reviews yet. Be the first to review!</p>
    <div *ngIf="canAddReview && !showReviewForm">
      <button class="btn btn-primary" (click)="showReviewForm = true">Add Review</button>
    </div>
  </div>
  <div *ngIf="showReviewForm && reviews.length === 0" class="card p-4 shadow-sm mb-4" style="max-width: 600px; margin: 0 auto;">
  <h5 class="mb-3">Add Your Review</h5>

  <div class="mb-3">
    <label class="form-label">Rating (1-5):</label>
    <input type="number" [(ngModel)]="newReview.stars" min="1" max="5" class="form-control" />
  </div>

  <div class="mb-3">
    <label class="form-label">Comment:</label>
    <textarea [(ngModel)]="newReview.comment" class="form-control" rows="4"></textarea>
  </div>

  <div class="d-flex justify-content-end">
    <button class="btn btn-secondary me-2" (click)="showReviewForm = false">Cancel</button>
    <button class="btn btn-success" (click)="submitReview()">Submit</button>
  </div>
</div>

</div>
